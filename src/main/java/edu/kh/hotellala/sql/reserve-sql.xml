<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>reserve-sql.xml</comment>

<!-- 예약목록 조회 -->
<entry key="selectReserveAll">
	SELECT PAYMENT_DT, MEMBER_NM, ROOM_NO, CHECK_IN, CHECK_OUT, REQUEST_NO
	FROM RESERVATION R
	JOIN PAYMENT USING(REQUEST_NO)
	JOIN MEMBER M ON(R.MEMBER_NO = M.MEMBER_NO)
	WHERE RESERVATION_FL = 'Y'
</entry>


<!-- 검색 목록 조회 -->
<!-- <entry key="searchReserveList">
	
</entry> -->



<!-- 예약 상세 조회 -->
<entry key="selectReserveDetail">
	SELECT REQUEST_NO, TO_CHAR(PAYMENT_DT, 'YYYY-MM-DD') PAYMENT_DT, ROOM_NO, 
    TO_CHAR(CHECK_IN, 'YYYY-MM-DD') CHECK_IN, DATE_RANGE, ROOM_TYPE,
    RESERVED_NUM_A, RESERVED_NUM_C, MEMBER_NM, MEMBER_TEL, MEMBER_BR, MEMBER_ADDR, EXTRA_REQUEST
	FROM RESERVATION R
	JOIN PAYMENT USING(REQUEST_NO)
	JOIN MEMBER M ON(R.MEMBER_NO = M.MEMBER_NO)
	WHERE REQUEST_NO = ?	
</entry>


<!-- 예약 상태 조회  -->
<entry key="reserveStatus">
	SELECT RESERVATION_FL, REFUND_FL
	FROM RESERVATION
	JOIN PAYMENT USING(REQUEST_NO)
	JOIN REFUND USING(PAYMENT_NO)
	WHERE REQUEST_NO = ?
</entry>


<!-- 결제 정보 조회 -->
<entry key="reservePayment">
	SELECT ROOM_RATES, OPTION_TYPE, PAYTYPE, PAYMENT_AMOUNT
	FROM RESERVATION
	JOIN PAYMENT USING(REQUEST_NO)
	JOIN OPTION_ORDER USING(REQUEST_NO)
	JOIN OPTION_TB USING(OPTION_CD)
	JOIN ROOM_TB USING(ROOM_TYPE)
	WHERE REQUEST_NO = ?
</entry>




<!-- 객실 층별 조회 (SYSDATE로 바꿔)-->
<entry key="selectFloor">
	SELECT REQUEST_NO, CHECK_IN, CHECK_OUT, DATE_RANGE, ROOM_NO, MEMBER_NM   
	FROM RESERVATION
	JOIN MEMBER USING(MEMBER_NO)
	WHERE TO_DATE('2022-07-02', 'YYYY-MM-DD') BETWEEN CHECK_IN AND CHECK_OUT
	AND ROOM_TYPE = ?
	ORDER BY ROOM_NO, CHECK_OUT
</entry>







<!-- 환불 목록 조회 -->
<!-- <entry key="selectRefundAll">
	
</entry> -->



</properties>
