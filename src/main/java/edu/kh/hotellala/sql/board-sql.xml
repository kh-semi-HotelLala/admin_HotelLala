<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>board-sql.xml</comment>
<!-- 전체 qna 조회-->
<entry key="selectQnaList">
SELECT  QNA_NO,
            CATEGORY_NM,
            QNA_TITLE,
            ANSWER,
            MEMBER_NM,
            TO_CHAR(CREATE_DT,'YYYY-MM-DD') DT
FROM QNA_BOARD
JOIN CATEGORY_TYPE USING(CATEGORY_CD)
JOIN MEMBER USING(MEMBER_NO)
LEFT JOIN ADMIN_ACCOUNT USING(ADMIN_NO)
ORDER BY QNA_NO DESC
</entry>

	<!-- 전체 공지 조회 -->
<entry key="">
SELECT CATEGORY_NM,BOARD_TITLE,BOARD_CONTENT,BOARD_NM,TO_CHAR(CREATE_DT,'YY/MM/DD')
FROM BOARD 
INNER JOIN BOARD_TYPE  ON(BOARD_TYPE=BOARD_CD)
LEFT JOIN CATEGORY_TYPE  ON(CATEGORY_TYPE=CATEGORY_CD)
WHERE BOARD_ST = 'N'
AND BOARD_TYPE=1
ORDER BY BOARD_NO DESC
</entry>

<!-- FAQ 전체 조회 -->
<entry key="selectFaqList">
SELECT BOARD_NO,CATEGORY_NM,BOARD_TITLE,BOARD_CONTENT,TO_CHAR(CREATE_DT,'YYYY-MM-DD')
FROM BOARD 
INNER JOIN BOARD_TYPE  ON(BOARD_TYPE=BOARD_CD)
LEFT JOIN CATEGORY_TYPE  ON(CATEGORY_TYPE=CATEGORY_CD)
WHERE BOARD_ST = 'N'
AND BOARD_TYPE=2
ORDER BY BOARD_NO DESC
</entry>

<!-- QNA 상세 조회 -->
<entry key="selectQnaDetail">
SELECT  QNA_NO,
            CATEGORY_NM,
            QNA_TITLE,
            ANSWER,
            MEMBER_NM,
            TO_CHAR(CREATE_DT,'YYYY-MM-DD'),
            QNA_CONTENT,
            MEMBER_TEL,
            MEMBER_EMAIL,
            ANSWER_CONTENT
FROM QNA_BOARD
JOIN CATEGORY_TYPE USING(CATEGORY_CD)
JOIN MEMBER USING(MEMBER_NO)
LEFT JOIN ADMIN_ACCOUNT USING(ADMIN_NO)
WHERE QNA_NO=?
</entry>

<!-- QNA답변 삽입 -->
<entry key="insertAnswer">
UPDATE "HOTEL_LALA"."QNA_BOARD" 
SET ANSWER = 'Y', 
    ADMIN_NO = ?, 
    ANSWER_CONTENT = ?
WHERE QNA_NO=?
</entry>


<!-- 조건에 맞는 QNA 검색 조회  -->
<entry key="searchQnaList1">
SELECT  QNA_NO,
            CATEGORY_NM,
            QNA_TITLE,
            ANSWER,
            MEMBER_NM,
            TO_CHAR(CREATE_DT,'YYYY-MM-DD') DT
FROM QNA_BOARD
JOIN CATEGORY_TYPE USING(CATEGORY_CD)
JOIN MEMBER USING(MEMBER_NO)
LEFT JOIN ADMIN_ACCOUNT USING(ADMIN_NO)
WHERE  ANSWER=?
</entry>
<entry key="searchQnaList2">
ORDER BY QNA_NO DESC
</entry>


<entry key="searchQnaList">
SELECT BOARD_NO,CATEGORY_NM,BOARD_TITLE,BOARD_CONTENT,TO_CHAR(CREATE_DT,'YYYY-MM-DD')
FROM BOARD 
INNER JOIN BOARD_TYPE  ON(BOARD_TYPE=BOARD_CD)
LEFT JOIN CATEGORY_TYPE  ON(CATEGORY_TYPE=CATEGORY_CD)
WHERE BOARD_ST = 'N'
AND BOARD_TYPE=2 AND CATEGORY_CD = ?
ORDER BY BOARD_NO DESC
</entry>
</properties>
